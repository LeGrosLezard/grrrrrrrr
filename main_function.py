import cv2
import numpy as np

##a = [146, 140, 99, 43, 13, 85, 100, 77, 127, 137, 73, 77, 64, 27, 15, 120, 110, 81, 71, 42, 32, 64, 76, 77, 64, 15, 76] 
##b = [160, 159, 152, 143, 120, 115, 114, 113, 111, 109, 105, 95, 95, 95, 95, 82, 82, 81, 81, 80, 80, 77, 73, 66, 66, 66, 44] 
##c = [150, 145, 104, 48, 23, 95, 109, 84, 132, 150, 84, 84, 72, 35, 22, 138, 115, 99, 78, 60, 41, 72, 84, 83, 68, 22, 84] 
##d = [162, 162, 155, 146, 122, 117, 116, 121, 113, 112, 108, 97, 97, 97, 97, 84, 84, 83, 83, 82, 82, 79, 79, 72, 75, 75, 57] 
##e = ['a', 'a', 'a', 'a', 'a', 'a', 'a', 'd', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', '1', '5', '5', '1', 'c', '5']



##a = [103, 19, 19, 85, 82, 44, 32, 56, 82, 34, 79, 18, 110, 124, 83, 68, 80, 68, 79, 68, 81, 67, 24, 65, 92] 
##b = [150, 112, 108, 106, 103, 87, 87, 86, 85, 70, 66, 65, 63, 62, 61, 60, 57, 57, 40, 40, 34, 34, 34, 29, 23] 
##c = [123, 29, 29, 89, 88, 51, 39, 64, 88, 39, 88, 27, 114, 127, 88, 75, 87, 73, 87, 74, 87, 75, 28, 69, 104] 
##d = [152, 114, 110, 111, 107, 89, 89, 88, 87, 72, 70, 69, 65, 64, 65, 67, 60, 61, 47, 43, 39, 38, 36, 31, 27] 
##e = ['a', 'a', 'a', 'b', 'b', 'a', 'a', 'a', 'a', 'a', '3', 'd', 'a', 'a', '3', '8', '3', '8', '3', '9', '3', '9', 'a', 'a', 'a']


##a = [145, 140, 135, 120, 115, 105, 100, 95, 85, 80, 75, 65, 60, 40, 35, 20, 15, 11, 77, 11, 74, 8, 74, 62, 50, 37, 25, 13, 21, 22, 29, 12, 74, 74, 75, 62, 37, 38, 45, 53, 53, 75, 75, 75, 62, 62, 68, 69, 84, 85] 
##b = [135, 135, 135, 134, 134, 133, 133, 133, 132, 132, 132, 131, 131, 130, 130, 129, 129, 123, 122, 119, 117, 102, 100, 99, 99, 99, 99, 99, 85, 92, 85, 72, 71, 78, 72, 71, 68, 75, 68, 53, 59, 48, 55, 49, 47, 55, 37, 42, 25, 25] 
##c = [149, 144, 139, 124, 118, 109, 104, 99, 89, 84, 79, 69, 64, 49, 39, 29, 19, 21, 81, 21, 81, 17, 81, 69, 57, 44, 32, 16, 33, 25, 32, 21, 82, 82, 82, 70, 49, 41, 48, 62, 56, 82, 82, 82, 70, 70, 78, 72, 88, 88] 
##d = [137, 137, 137, 136, 136, 135, 135, 135, 134, 134, 134, 133, 133, 132, 132, 131, 131, 125, 125, 122, 120, 109, 102, 101, 101, 101, 101, 101, 95, 95, 88, 83, 84, 83, 78, 84, 78, 78, 71, 62, 62, 61, 60, 55, 61, 60, 45, 45, 28, 28] 
##e = ['a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'b', 'a', '2', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'd', '8', '8', '8', '5', 'a', 'a', 'a', '8', 'a', '8', '8', '8', '8', '8', 'a', 'a', 'a', 'a']


a = [139, 73, 19, 10, 85, 64, 54, 30, 41, 19, 89, 52, 32, 100, 96, 111, 129, 144, 140, 80, 68, 68, 68, 68, 79, 67] 
b = [118, 113, 112, 108, 106, 100, 99, 90, 87, 87, 86, 86, 86, 85, 85, 84, 83, 82, 82, 57, 57, 63, 58, 38, 34, 34] 
c = [142, 79, 29, 16, 89, 68, 58, 33, 51, 29, 92, 63, 40, 106, 99, 117, 136, 150, 143, 87, 76, 76, 75, 75, 87, 74] 
d = [120, 115, 114, 111, 111, 102, 101, 92, 91, 92, 88, 92, 91, 87, 87, 86, 85, 84, 84, 65, 70, 69, 63, 47, 47, 36] 
e = ['a', 'a', 'a', 'a', '2', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', 'a', '7', '8', '8', '8', '5', '2', '5']
 

blank_image = np.zeros((200,200,3), np.uint8)
blank_image[0:200, 0:200] = 255, 255, 255

blank_image2 = np.zeros((200,200,3), np.uint8)
blank_image2[0:200, 0:200] = 255, 255, 255

a = a[:len(e)]
b = b[:len(e)]
c = c[:len(e)]
d = d[:len(e)]

for i in range(len(c)):
    if e[i] == "c":
        e[i] = "multiplication"
    elif e[i] == "d":
        e[i] =  "addition"



sign = []
position = []
for i in range(11):
    position.append([])

for i in range(len(e)):
    if e[i] == "a" or e[i] == "b":
        pass
    elif e[i] == "multiplication" or e[i] == "addition":
        sign.append([b[i],d[i], a[i],c[i], e[i]])

    else:
        try:
            e[i] = int(e[i])
            position[int(e[i])].append([b[i], a[i], d[i], c[i]])
        except:
            pass




count = 0
mean = 0
for i in position:
    if i  == []:
        pass
    else:
        for j in i:
            mean += j[0]
    count += 1

mean = int(mean / count)
for i in position:
    if i  == []:
        pass
    else:
        for j in i:
            if j[0] > mean + 25 or\
               j[0] < mean - 25:
                i.remove(j)



for i in position:
    if len(i) > 1:
        for j in i:
            for k in i:
                if abs(j[0] - k[0]) == 0:
                    pass
                elif abs(j[0] - k[0]) < 15:
                    try:
                        i.remove(j)
                    except:
                        pass







stop = False
for s in sign:
    for i in position:
        for j in i:
            if abs(s[0] - j[0]) < 10:
                position[-1].append(s[-1])
                stop = True
        if stop is True:
            break

if stop is False:
    position[-1].append("soustraction")




top = []
bot = []


x = []
count = 0
for i in position:
    if i == []:
        pass
    else:
        for j in i:
            print(j, count)
            try:
                j[0] = int(j[0])
                if j[0] == int(j[0]):
                    x.append(j[0])
            except ValueError:
                pass

    count += 1





#faux car 1*15 ou 15 * 1
print("")
print(x)
for i in range(2):
    top.append(max(x))
    x.remove(max(x))
print(top)















